#### 性能优化六大原则
- ![image](../../ref_images/20200215/bc08d73063d641b231db155d7ffe26bb.jpg)
- 优先优化最大性能瓶颈： 做性能分析和剖析
- 性能分析要确诊性能问题的根因
    - 考虑优化工作的投入产出比例，就是既考虑成本，也考虑带来的好处
- 性能优化要考虑各种的情况
    - 有一个整体的意识和判断
- 不要做过度的、反常态的优化
    - 过度的优化会增加系统复杂度和维护成本，使得开发和测试周期变长
    - 根据产品的性能要求来决策
- 不要过早做不成熟的优化
    - 如果一个产品已经在业界很成熟，大家非常清楚它的生产环境特点和性能瓶颈，那么优化的重要性可以适当提高 
- 不要做表面的肤浅优化
    - 最好能够自动调整，千万别动不动就手工调优
    
#### 性能优化策略
 - ![image](../../ref_images/20200215/5cc1f7f09fb87ec47cccaeda6948d484.png)    
 - 用时间换空间
     - 改变应用程序本身的数据结构或者数据格式，减少需要存储的数据的大小
     - 想方设法压缩存在内存中的数据，比如采用某种压缩算法，真正使用时再解压缩
     - 把一些内存数据，存放到外部的、更加便宜的存储系统里面，到需要时再取回来
 - 用空间换时间
     - 负载均衡，就是同时用很多个服务器（空间）来换取延迟的减少（时间）
 - 预先/提前处理
     - CPU硬件预取和软件预取
 - 延后/惰性处理
     - 写时复制: fork 调用/CopyOnWrite 容器       
 - 并行操作
     - 多线程
 - 异步操作
 - 缓存数据
 - 批量合并处理
 - 先进的算法
 - 高效的数据结构
 - 性能优化策略，应该着重服务的水平扩展性，就是通过多线程和多服务器来扩展服务的总体容量
 - 需要尽量地减少跨数据中心和跨机架的网络流量，也就是尽量让网络在本地消化掉
 - 未来是单处理器的天下：在很多生产环境中，内存容量和内存带宽，才是主要的性能瓶颈，而不是 CPU